{"version":3,"sources":["env.js","template/ers_template.brandingMenu.js","template/ers_template.elementLink.js","template/ers_template.toolbar.js","template/ers_template.votingFilter.js","app.js"],"names":["template","desktop_more_menu","ers_template","$","jQuery","noConflict","brandingMenu","click","e","stopPropagation","preventDefault","trigger","hasClass","this","addClass","removeClass","document","on","target","closest","length","attr","elementLink","find","window","open","location","toolbar","toggleClass","focus","votingFilter","hide","css","width","elementHeights","map","height","get","maxHeight","Math","max","apply","$grid","isotope","itemSelector","resizable","layoutMode","getSortData","title","proportionality","voter_choice","local_representation","sortAscending","sortByValue","sortBy","val","objectFitImages","sr","debounce","func","threshold","execAsap","timeout","obj","args","arguments","clearTimeout","setTimeout","fn","bind","windowWidthResize","smartresize"],"mappings":"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","file":"scripts.min.js","sourcesContent":["/* Application environment\n   ========================================================================== */\n\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-native-reassign */\n'use strict';\n\n/* eslint-disable no-undef */\ntemplate.desktop_more_menu = () => {};\n/* eslint-enable no-undef */\n\n/**\n * Set up environment globals.\n */\nconst ers_template = {};\n\n/**\n * Define jQuery in noConflict mode.\n */\n/* eslint-disable no-global-assign */\n$ = jQuery.noConflict();\n/* eslint-enable no-global-assign */\n","/* Template: Branding Menu\n   ========================================================================== */\n\n'use strict';\n\ners_template.brandingMenu = () => {\n\t$('.ers-branding__menu').click(function(e) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\t$('.menu-toggle').trigger('click');\n\n\t\tif ($('#site-navigation').hasClass('open')) {\n\t\t\t$(this).addClass('ers-branding__menu--active');\n\t\t} else {\n\t\t\t$(this).removeClass('ers-branding__menu--active');\n\t\t}\n\t});\n\n\t$(document).on('click touchend', function(e) {\n\t\tif (!$(e.target).closest('#navbar').length) {\n\t\t\t$('.ers-branding__menu').removeClass('ers-branding__menu--active');\n\t\t}\n\n\t\tif (!$(e.target).closest('.ers-toolbar').length) {\n\t\t\t$('.ers-toolbar').removeClass('ers-toolbar--active');\n\t\t\t$('#toolbar-search').attr('aria-hidden', 'true');\n\t\t}\n\t});\n};\n","/* Template: Element Link\n   ========================================================================== */\n\n'use strict';\n\ners_template.elementLink = function() {\n\n\t$('.element-link').click(function() {\n\n\t\tif ($(this).find('a').attr('target') === '_blank') {\n\t\t\twindow.open($(this).find('a').attr('href'), '_blank');\n\t\t} else {\n\t\t\twindow.location = $(this).find('a').attr('href');\n\t\t}\n\n\t\treturn false;\n\t});\n\n};\n","/* Template: Toolbar\n   ========================================================================== */\n\n'use strict';\n\ners_template.toolbar = () => {\n\t$('.ers-toolbar__search').click(function(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\t$('.ers-toolbar').toggleClass('ers-toolbar--active');\n\n\t\tif ($('.ers-toolbar').hasClass('ers-toolbar--active')) {\n\t\t\t$('#ers-toolbar__search-form-input').focus();\n\t\t\t$('#toolbar-search').attr('aria-hidden', 'false');\n\t\t} else {\n\t\t\t$('#toolbar-search').attr('aria-hidden', 'true');\n\t\t}\n\t});\n};\n","/* Template: Voting filter\n   ========================================================================== */\n\n'use strict';\ners_template.votingFilter = () => {\n\n\tconst $form = $('#voting-filter-form'),\n\t\t//$select = $('#voting-filter-select'),\n\t\t$button = $form.find('button');\n\n\t$button.hide();\n\n\t$('.voting-leader__item').css('height', 'auto');\n\n\t// $select.change(function() {\n\t// \tthis.form.submit();\n\t// });\n\n\tif ($(window).width() > 767) {\n\t\tvar elementHeights = $('.voting-leader__item').map(function() {\n\t\t\treturn $(this).height();\n\t\t}).get();\n\n\t\t// Math.max takes a variable number of arguments\n\t\t// `apply` is equivalent to passing each height as an argument\n\t\tvar maxHeight = Math.max.apply(null, elementHeights);\n\n\t\t// Set each height to the max height\n\t\t$('.voting-leader__item').css('height', maxHeight + 10);\n\t} else {\n\t\t$('.voting-leader__item').css('height', 'auto');\n\t}\n\n\tvar $grid = $('.voting-leader').isotope({\n\t\titemSelector: '.voting-leader__item',\n\t\tresizable: false,\n\t\tlayoutMode: 'fitRows',\n\t\tgetSortData: {\n\t\t\ttitle: '.voting-leader-child__heading',\n\t\t\tproportionality: '.proportionality parseInt',\n\t\t\tvoter_choice: '.voter-choice parseInt',\n\t\t\tlocal_representation: '.local-representation parseInt'\n\t\t},\n\t\t//sortBy : 'proportionality',\n\t\tsortAscending: false\n\t});\n\n\t// sort items on button click\n\t$('.voting-filter').on('click', '.voting-filter__btn', function(e) {\n\t\te.preventDefault();\n\n\t\t$('.voting-filter__btn').removeClass('voting-filter__btn--active');\n\t\t$(this).addClass('voting-filter__btn--active');\n\n\t\tvar sortByValue = $(this).attr('data-sort-by');\n\t\t$grid.isotope({sortBy: [sortByValue, 'title']});\n\n\t\t$('#voting-filter-select').val(sortByValue + '_rating');\n\t});\n\n\t$('.voting-filter').on('change', '#voting-filter-select', function(e) {\n\t\te.preventDefault();\n\t\tvar sortByValue = $(this).find(':selected').attr('data-sort-by');\n\t\t$grid.isotope({sortBy: sortByValue});\n\n\t\t$('.voting-filter__btn').removeClass('voting-filter__btn--active');\n\t\t$('.voting-filter__btn.' + sortByValue).addClass('voting-filter__btn--active');\n\t});\n\n};\n","/* Electoral Reform Society Application\n   ========================================================================== */\n\n'use strict';\n\n$(function() {\n\t/* Template */\n\ters_template.toolbar();\n\ters_template.brandingMenu();\n\t//ers_template.votingCalcHeights();\n\ters_template.votingFilter();\n\ters_template.elementLink();\n\n\t/* jshint ignore:start */\n\t// eslint-disable-next-line no-undef\n\tobjectFitImages();\n\t/* jshint ignore:end */\n});\n\n(function($,sr) {\n\n\t// debouncing function from John Hann\n\t// http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/\n\tvar debounce = function(func, threshold, execAsap) {\n\t\tvar timeout;\n\n\t\treturn function debounced() {\n\t\t\tvar obj = this, args = arguments;\n\t\t\tfunction delayed() {\n\t\t\t\tif (!execAsap)\n\t\t\t\t\tfunc.apply(obj, args);\n\t\t\t\ttimeout = null;\n\t\t\t}\n\n\t\t\tif (timeout)\n\t\t\t\tclearTimeout(timeout);\n\t\t\telse if (execAsap)\n\t\t\t\tfunc.apply(obj, args);\n\n\t\t\ttimeout = setTimeout(delayed, threshold || 100);\n\t\t};\n\t};\n\n\t// smartresize\n\tjQuery.fn[sr] = function(fn) {  return fn ? this.bind('resize', debounce(fn)) : this.trigger(sr); };\n\n})(jQuery,'smartresize');\n\nvar windowWidthResize = $(window).width();\n\n// Smart resize\n$(window).smartresize(function() {\n\n\tif ($(window).width() !== windowWidthResize) {\n\n\t\twindowWidthResize = $(window).width();\n\n\t\ters_template.votingFilter();\n\n\t}\n});\n"]}